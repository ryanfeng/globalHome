doctype html
html(lang='en')
    head
        title 空气复原机S1-浙江地球村环保科技有限公司
        meta(name="keywords" content="空气复原机S1, 空气净化器")
        meta(name="description" content="地球村空气复原机S1,10分钟彻底置换室内空气,净化空气,让房间“深呼吸”一次,给生活一片净土。")
        include common/meta.jade
        link(href='../css/produce-s1.css', rel='stylesheet')
    body
        include common/head.jade
        .produde-nav
            .container
                | 空气复原机S1
                ul
                    li.active.nav-class.hidden-xs.nav-class1(onclick="click_scroll('moudle1')") 设计
                    li.nav-class.hidden-xs.nav-class2(onclick="click_scroll('moudle2')") 性能
                    li.nav-class.hidden-xs.nav-class3(onclick="click_scroll('moudle3')") 功能
                    a(href="https://item.taobao.com/item.htm?spm=a1z10.5-c.w4002-14122207490.33.Gf8T7l&id=540902952632" target="_blank")
                        li.li-last 现在购买
        .produce-nav-fix
            .container
                | 空气复原机S1
                ul
                    li.active.nav-class.hidden-xs.nav-class1(onclick="click_scroll('moudle1')") 设计
                    li.nav-class.hidden-xs.nav-class2(onclick="click_scroll('moudle2')") 性能
                    li.nav-class.hidden-xs.nav-class3(onclick="click_scroll('moudle3')") 功能
                    a(href="https://item.taobao.com/item.htm?spm=a1z10.5-c.w4002-14122207490.33.Gf8T7l&id=540902952632" target="_blank")
                        li.li-last 现在购买
        .s1-con.s1-con1.hidden-xs
            .container
                .con-ft-block 空气复原机S1<br>小小空间恰到好处  JUST PERFECT
                    .con-ft-sm1
                        | ￥
                        span 1899
                        a(href='https://item.taobao.com/item.htm?spm=a1z10.5-c.w4002-14122207490.33.Gf8T7l&id=540902952632' target="_blank" class="in-block")
                            label 立即购买
                video.video(autoplay preload="auto")
                    source(src="http://qnstatic.globalvillage.biz/produce-video1.mp4" type="video/mp4")
                    img(src="./images/produce/video-s1-img.jpg")
        .s1-con.s1-con2.hidden-xs(data-url="../images/produce/produce-s1.png")
            .container
                .con-ft-block.ft-color-FFF 哪怕空间再小，姿态要美
                    .con-ft-sm2
                        label 0-15m<sup>2</sup>
                        br
                        span 适用空间
        .s1-con.s1-con3.hidden-xs(data-url="../images/produce/produce-s3.png")
            .container.hidden-xs
                .con-ft-block 使用场景
                    .con-ft-sm3
                        #center
                            #slider
                                .slide
                                    img.diapo(src="http://qnstatic.globalvillage.biz/produce/s3-1.png")
                                    .text
                                        span.title 办公
                                        | 没有指间的烟味，也拒绝鼻尖的烟味
                                .slide
                                    img.diapo(src="../images/produce/s3-2.png")
                                    .text
                                        span.title 卧室
                                        | 睡不好是因为周公介意连呼吸都喘不过气
                                .slide
                                    img.diapo(src="http://qnstatic.globalvillage.biz/produce/s3-3.png")
                                    .text
                                        span.title 书房
                                        | 安安静静地沐浴在文字里,干干净净地只闻到墨香
        .s1-con.s1-con4.hidden-xs#moudle1(data-url="../images/produce/produce-s4.png")
            .container
                .con-ft-block 一本书的直径&nbsp;&nbsp;一束花的高度
                    .con-ft-sm4 它很小，桌面、地面、床头，你想到的任何地方，它都可以适应；<br>它很轻，普通笔记本电脑的重量，你可以轻易移动到想要的地方。<br>0.016m³浓缩体积&nbsp;&nbsp;2.8kg浓缩重量
                        img.flower(src="../images/produce/s4-flower.png")
                        img.rule.data-img(data-url="../images/produce/s4-rule.png")
        .s1-con.s1-con5.hidden-xs#moudle2(data-url="../images/produce//produce-s5.jpg")
            .container
                .con-ft-block.ft-color-FFF 10分钟置换空气&nbsp;&nbsp;给生活应有的格调
                    .con-ft-sm5
                        | 10分钟，彻底置换室内空气，让房间“深呼吸”一次，给生活一片净土。<br>
                        label.first
                            number 137m³/h<br>
                            span CADR颗粒物
                        label
                            number 54m³/h<br>
                            span CADR甲醛
                        img.data-img(data-url="../images/produce/s5-arraw.png")
        .s1-con.s1-con6.hidden-xs(data-url="../images/produce/produce-s6.png")
            .container
                .con-ft-block.ft-color-FFF 1小时耗电1分钱&nbsp;&nbsp;为小空间量身打造
                    .con-ft-sm6 功率30W，1小时耗电1分钱，小空间何须大设备，美从来都是恰到好处。
        .s1-con.s1-con7.hidden-xs(data-url="http://qnstatic.globalvillage.biz/produce/produce-s7.png")
            .container
                .con-ft-block.ft-color-FFF 32dB极致静音<br>嘘！轻点声儿
                    .con-ft-sm7
                        img.data-img(data-url='../images/produce/s7-listen.png')
        .s1-con.s1-con8.hidden-xs#moudle3(data-url="../images/produce/produce-s8.png")
            .container
                .con-ft-block.ft-color-FFF DHPC光子催化技术&nbsp;&nbsp;主动出击彻底分解
                    .con-ft-sm8 DHPC光子催化技术，纳米贵金属主动出击，不断释放羟基和氢氧离子，<br>主动抓取空气中的甲醛等有害气体，彻底分解还原。
                    img.sm8-arrow.data-img(data-url="../images/produce/jf3-arraw.png")
        .s1-con.s1-con9.hidden-xs(data-url="./images/produce/produce-s9.png")
            .container
                .con-ft-block 216亿负离子&nbsp;&nbsp;模拟生态环境
                    .con-ft-sm9 600万负离子发生器，每小时发生216亿的负氧离子（“空气维生素”），<br>模拟生态氧吧。每一口，都是自然最原始的味道。
                        .sm5-pm
                            img.pm-img.pm-imga.data-img(data-url="../images/produce/pm-flz1.png")
                            img.pm-img.pm-imgb.data-img(data-url="../images/produce/pm-flz1.png")
                            img.pm-img.pm-imgc.data-img(data-url="../images/produce/pm-flz1.png")
                            img.pm-img.pm-imgd.data-img(data-url="../images/produce/pm-flz1.png")
                            img.pm-img.pm-imge.data-img(data-url="../images/produce/pm-flz1.png")
                            img.pm-img.pm-imgf.data-img(data-url="../images/produce/pm-flz1.png")
                            img.pm-img.pm-imgn.data-img(data-url="../images/produce/pm-flz2.png")
                            img.pm-img.pm-imgh.data-img(data-url="../images/produce/pm-flz2.png")
                            img.pm-img.pm-imgm.data-img(data-url="../images/produce/pm-flz3.png")
                            img.pm-img.pm-imgz.data-img(data-url="../images/produce/pm-flz1.png")
                            img.pm-img.pm-imgk.data-img(data-url="../images/produce/pm-flz3.png")
        a(href="https://item.taobao.com/item.htm?spm=a1z10.5-c.w4002-14122207490.33.Gf8T7l&id=540902952632" target="_blank")
            img.data-img.s1-con-img.visible-xs-inline-block.s1-1(data-url="../images/produce/produce-s1-1.png" style="min-height:320px")
        img.data-img.s1-con-img.visible-xs-inline-block.s1-2(data-url="../images/produce/produce-s1-2.png" style="min-height:122px")
        img.data-img.s1-con-img.visible-xs-inline-block(data-url="../images/produce/produce-s1-3.png")
        img.data-img.s1-con-img.visible-xs-inline-block(data-url="../images/produce/produce-s1-4.png")
        img.data-img.s1-con-img.visible-xs-inline-block(data-url="../images/produce/produce-s1-5.png")
        img.data-img.s1-con-img.visible-xs-inline-block(data-url="../images/produce/produce-s1-6.png")
        img.data-img.s1-con-img.visible-xs-inline-block(data-url="../images/produce/produce-s1-7.png")
        img.data-img.s1-con-img.visible-xs-inline-block(data-url="../images/produce/produce-s1-8.png")
        img.data-img.s1-con-img.visible-xs-inline-block(data-url="../images/produce/produce-s1-9.png")
        img.data-img.s1-con-img.visible-xs-inline-block(data-url="../images/produce/produce-s1-10.png")
        img.data-img.s1-con-img.visible-xs-inline-block(data-url="../images/produce/produce-s1-11.png")
        include common/foot.jade
        script.
            //图片懒加载
            //花瓶的动画
            $(window).scroll(function () {
                //分贝动画
                if ($(window).scrollTop() > 4100) {
                    $(".con-ft-sm7 img").css("margin-left", '-140px');
                }
                //花瓶动画
                if ($(window).scrollTop() > 2000) {
                    $(".flower").css("left", '110px').css("top", "130px").css("height", '370px');
                    $(".rule").css('height', "396px").css("top", '114px').css("right", '218px');
                }
            });
            //分贝动画
            if ($(window).scrollTop() > 2000) {
                $(".flower").css("left", '110px').css("top", "130px").css("height", '370px');
                $(".rule").css('height', "396px").css("top", '114px').css("right", '218px');
            }
            //分贝动画
            if ($(window).scrollTop() > 4100) {
                $(".con-ft-sm7 img").css("margin-left", '-140px');
            }
            //移动端的图片大小设定
            var width = $(window).width();
            $(".s1-1").css('height', width * (776/768));
            $(".s1-2").css('height', width * (295/768));

            //头部下面导航页面的定位
            (function () {
                var heightArr = [];
                for (var i = 1; i <= 3; i++) {
                    var id = "#moudle" + i;
                    var heightObj = {};
                    heightObj.id = i;
                    heightObj.top = $(id).offset().top;
                    heightArr.push(heightObj);
                }
                $(window).scroll(function () {
                    var topheight = $(window).scrollTop();
                    for (var j = heightArr.length - 1; j > -1; j--) {
                        if (topheight >= heightArr[j].top) {
                            $('.nav-class').removeClass('active');
                            $(".nav-class" + heightArr[j].id).addClass("active");
                            break;
                        }
                    }
                });
            })();

            /* ==== slider nameSpace ==== */
            //图片的切换
            var slider = function () {
                /* ==== private methods ==== */
                function getElementsByClass(object, tag, className) {
                    var o = object.getElementsByTagName(tag);
                    for (var i = 0, n = o.length, ret = []; i < n; i++) {
                        if (o[i].className == className) ret.push(o[i]);
                    }
                    if (ret.length == 1) ret = ret[0];
                    return ret;
                }

                function setOpacity(obj, o) {
                    if (obj.filters) obj.filters.alpha.opacity = Math.round(o);
                    else obj.style.opacity = o / 100;
                }

                /* ==== Slider Constructor ==== */
                function Slider(oCont, speed, iW, iH, oP) {
                    this.slides = [];
                    this.over = false;
                    this.S = this.S0 = speed;
                    this.iW = iW;
                    this.iH = iH;
                    this.oP = oP;
                    this.oc = document.getElementById(oCont);
                    this.frm = getElementsByClass(this.oc, 'div', 'slide');
                    this.NF = this.frm.length;
                    this.resize();
                    for (var i = 0; i < this.NF; i++) {
                        this.slides[i] = new Slide(this, i);
                    }
                    this.oc.parent = this;
                    this.view = this.slides[0];
                    this.Z = this.mx;
                    /* ==== on mouse out event ==== */
                    this.oc.onmouseout = function () {
                        this.parent.mouseout();
                        return false;
                    }
                }

                Slider.prototype = {
                    /* ==== animation loop ==== */
                    run: function () {
                        this.Z += this.over ? (this.mn - this.Z) * .5 : (this.mx - this.Z) * .5;
                        this.view.calc();
                        var i = this.NF;
                        while (i--) this.slides[i].move();
                    },
                    /* ==== resize  ==== */
                    resize: function () {
                        this.wh = this.oc.clientWidth;
                        this.ht = this.oc.clientHeight;
                        this.wr = this.wh * this.iW;
                        this.r = this.ht / this.wr;
                        this.mx = this.wh / this.NF;
                        this.mn = (this.wh * (1 - this.iW)) / (this.NF - 1);
                    },
                    /* ==== rest  ==== */
                    mouseout: function () {
                        this.over = false;
                        setOpacity(this.view.img, this.oP);
                    }
                }
                /* ==== Slide Constructor ==== */
                Slide = function (parent, N) {
                    this.parent = parent;
                    this.N = N;
                    this.x0 = this.x1 = N * parent.mx;
                    this.v = 0;
                    this.loaded = false;
                    this.cpt = 0;
                    this.start = new Date();
                    this.obj = parent.frm[N];
                    this.txt = getElementsByClass(this.obj, 'div', 'text');
                    this.img = getElementsByClass(this.obj, 'img', 'diapo');
                    this.bkg = document.createElement('div');
                    this.bkg.className = 'backgroundText';
                    this.obj.insertBefore(this.bkg, this.txt);
                    if (N == 0) this.obj.style.borderLeft = 'none';
                    this.obj.style.left = Math.floor(this.x0) + 'px';
                    setOpacity(this.img, parent.oP);
                    /* ==== mouse events ==== */
                    this.obj.parent = this;
                    this.obj.onmouseover = function () {
                        this.parent.over();
                        return false;
                    }
                }
                Slide.prototype = {
                    /* ==== target positions ==== */
                    calc: function () {
                        var that = this.parent;
                        // left slides
                        for (var i = 0; i <= this.N; i++) {
                            that.slides[i].x1 = i * that.Z;
                        }
                        // right slides
                        for (var i = this.N + 1; i < that.NF; i++) {
                            that.slides[i].x1 = that.wh - (that.NF - i) * that.Z;
                        }
                    },
                    /* ==== HTML animation : move slides ==== */
                    move: function () {
                        var that = this.parent;
                        var s = (this.x1 - this.x0) / that.S;
                        /* ==== lateral slide ==== */
                        if (this.N && Math.abs(s) > .5) {
                            this.obj.style.left = Math.floor(this.x0 += s) + 'px';
                        }
                        /* ==== vertical text ==== */
                        var v = (this.N < that.NF - 1) ? that.slides[this.N + 1].x0 - this.x0 : that.wh - this.x0;
                        if (Math.abs(v - this.v) > .5) {
                            this.bkg.style.top = this.txt.style.top = Math.floor(2 + that.ht - (v - that.Z) * that.iH * that.r) + 60 + 'px';
                            this.v = v;
                            this.cpt++;
                        } else {
                            if (!this.pro) {
                                /* ==== adjust speed ==== */
                                this.pro = true;
                                var tps = new Date() - this.start;
                                if (this.cpt > 1) {
                                    that.S = Math.max(2, (28 / (tps / this.cpt)) * that.S0);
                                }
                            }
                        }
                        if (!this.loaded) {
                            if (this.img.complete) {
                                this.img.style.visibility = 'visible';
                                this.loaded = true;
                            }
                        }
                    },
                    /* ==== light ==== */
                    over: function () {
                        this.parent.resize();
                        this.parent.over = true;
                        setOpacity(this.parent.view.img, this.parent.oP);
                        this.parent.view = this;
                        this.start = new Date();
                        this.cpt = 0;
                        this.pro = false;
                        this.calc();
                        setOpacity(this.img, 100);
                    }
                }
                /* ==== public method - script initialization ==== */
                return {
                    init: function () {
                        // create instances of sliders here
                        // parameters : HTMLcontainer name, speed (2 fast - 20 slow), Horizontal ratio, vertical text ratio, opacity
                        this.s1 = new Slider("slider", 12, 1.84 / 3, 1 / 3.2, 70);
                        setInterval("slider.s1.run();", 16);
                    }
                }
            }();

            slider.init();